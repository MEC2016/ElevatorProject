#ElevatorProject From HustProjectE
##开发者：熊唐程，郑君政，吴川，李戈，蔡诗旭，汪正勇
##项目开发环境
Windows Automation Studio 4.2
##系统功能设定
![image](http://images2015.cnblogs.com/blog/897300/201606/897300-20160618112002432-1431124676.png)
##项目开发技术
ST语言
##项目背景
机械学院大楼共七层，大楼南入口有两部电梯同时工作，请为南入口开发基于PLC的电梯控制系统。
##主要模块讲解
首先是判断电梯目前是否应该停止，然后判断电梯门开闭，然后再确定电梯的目标楼层，最后再更新各面板和指示灯的显示。详情见Design.md是各类算法细节
#实际开发结果
##产品功能
功能需求是1.当有人按下楼层的上行和下行按钮时，电梯控制系统调度一部电梯尽快到达乘客所在的楼层，2.电梯轿厢在楼层停稳后延迟2秒钟打开电梯门，电梯门打开后延迟10秒后电梯门自动关闭，在此期间如有人按下关闭按钮则立即关闭电梯门。在电梯门关闭过程中如有人在外面按下与电梯运行方向一致的按钮或有人在轿厢内按下开门按钮，则电梯门再次打开，一旦电梯门关闭，则不再响应按钮。3.两部电梯的调度策略可由开发者灵活定义，以整体上节约乘客等待时间和节约能耗为评价标准。
实现的功能是左电梯可以达到要求，右电梯没有任何动作。为了解决这个问题，在测试的过程中，我们尝试了交换左右代码出现的顺序以及删除所有左电梯的代码，仍然不能解决，然后我们右电梯的代码的Right全部改成Left之后单独在一个新的项目中使用左电梯可以动作，无法找出问题出现在哪里。还有一个问题是左电梯再启动的时候最初会开门关门一次。
#进度
时间用尽，代码整体完成，左电梯功能完成，但代码未完成Debug
#开发工作评价
##对技术方法的评价
模块与模块之间的变量不会相互篡改，分成六份工编写时没有什么问题，但是由于是将功能分块，各部分功能之间缺一就很难调试电梯，所以模块的单元检测没有进行，最后整体调试困难重重。
##出错原因的分析
左右电梯的代码是对称的，但是右侧电梯无法运动，交换代码顺序不改变这一事实说明不是程序运行时执行语句先后的问题，单独调试也无法解决，属于未解决问题
一开始电梯无法停止，分析与原因是因为Sensor_Floor1Approached变量的值变化比较快，但是controller这个package里面的代码是1s运行一次，不能检测到电梯到了某一层楼，所以我们换成了Display_Current_Floor_Left这个量。
##经验与教训
编写程序时分工是很重要的，分的工需要能够进行单元检测，否则最后Debug的过程将会非常艰难。
